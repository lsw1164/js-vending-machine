(()=>{"use strict";var n={340:(n,t,r)=>{r.d(t,{Z:()=>c});var e=r(537),a=r.n(e),o=r(645),i=r.n(o)()(a());i.push([n.id,'.purchase-available,\r\n.product-inventory,\r\n.cashbox-change,\r\n.cashbox-remaining {\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n  text-align: center;\r\n  vertical-align: top;\r\n  table-layout: fixed;\r\n}\r\n\r\n.cashbox-change,\r\n.cashbox-remaining {\r\n  width: 100%;\r\n  max-width: 300px;\r\n}\r\n\r\n.product-inventory {\r\n  width: 340px;\r\n}\r\n\r\n.purchase-available {\r\n  width: 445px;\r\n}\r\n\r\n.cashbox-change col,\r\n.cashbox-remaining col {\r\n  width: 65px;\r\n}\r\n\r\n.purchase-available td,\r\n.product-inventory td,\r\n.cashbox-change td,\r\n.cashbox-remaining td {\r\n  border-color: black;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  font-family: Arial, sans-serif;\r\n  font-size: 14px;\r\n  overflow: hidden;\r\n  padding: 10px 5px;\r\n  word-break: normal;\r\n}\r\n\r\n.purchase-available th,\r\n.product-inventory th,\r\n.cashbox-change th,\r\n.cashbox-remaining th {\r\n  border-color: black;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  font-family: Arial, sans-serif;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  overflow: hidden;\r\n  padding: 10px 5px;\r\n  word-break: normal;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  padding: 2rem 1rem;\r\n  word-break: keep-all;\r\n  overflow-wrap: break-word;\r\n  font-size: 1.0625rem;\r\n  overflow-anchor: none;\r\n  background-color: #f4f3f5;\r\n}\r\n\r\nsection {\r\n  width: 28rem;\r\n}\r\n\r\nsection:last-child {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 1rem;\r\n}\r\n\r\n#app {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\ninput[type="number"],\r\ninput[type="text"] {\r\n  all: unset;\r\n  font-size: 0.825rem;\r\n  padding: 0.5rem;\r\n  background: white;\r\n  text-align: left;\r\n  border: 1px solid #afafaf;\r\n  border-radius: 6px;\r\n  width: calc(100% - 6.125rem);\r\n}\r\n\r\n#charge-button,\r\n#product-add-button,\r\n#vending-machine-charge-button {\r\n  padding: 0.5rem;\r\n  margin-left: 0.5rem;\r\n}\r\n\r\nbutton {\r\n  all: unset;\r\n  font-size: 0.825rem;\r\n  cursor: pointer;\r\n  border: 1px solid #afafaf;\r\n  border-radius: 6px;\r\n  padding: 0.3rem 0.45rem;\r\n}\r\n\r\nsection p {\r\n  border: 1px dashed rgb(70, 70, 70);\r\n  border-radius: 6px;\r\n  padding: 8px 0;\r\n  border-radius: 6px;\r\n  width: 65%;\r\n  font-size: 14px;\r\n}\r\n\r\n.purchase-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.product-inventory {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.product-container input:not(:first-child) {\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.vending-machine-wrapper {\r\n  width: 65%;\r\n}\r\n\r\n#product-add-button {\r\n  margin-left: 0.5rem;\r\n  width: 50%;\r\n  text-align: center;\r\n}\r\n\r\n#coin-return-button {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\nbutton:active {\r\n  box-shadow: 1px 1px 2px 1px #d8d8d8 inset;\r\n}\r\n\r\n.cashbox-remaining,\r\n.purchase-available,\r\n.cashbox-change,\r\n.product-inventory {\r\n  border-radius: 10px;\r\n  border-collapse: collapse;\r\n  border-style: hidden;\r\n  box-shadow: 0 0 0 1px rgb(66, 66, 66);\r\n}\r\n\r\n.purchase-available td,\r\n.product-inventory td,\r\n.cashbox-change td,\r\n.cashbox-remaining td,\r\n.purchase-available th,\r\n.product-inventory th,\r\n.cashbox-change th,\r\n.cashbox-remaining th {\r\n  border: 1px solid rgb(66, 66, 66);\r\n}\r\n\r\n.d-none {\r\n  display: none;\r\n}\r\n\r\n.table {\r\n  width: 400px;\r\n  border: 1px solid #444444;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.table-cell {\r\n  border: 1px solid #444444;\r\n  text-align: center;\r\n  padding: 10px 0;\r\n}\r\n\r\n.product-manage-form {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.vending-machine-wrapper {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n',"",{version:3,sources:["webpack://./src/css/index.css"],names:[],mappings:"AAAA;;;;EAIE,yBAAyB;EACzB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;;EAEE,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,YAAY;AACd;;AAEA;;EAEE,WAAW;AACb;;AAEA;;;;EAIE,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,8BAA8B;EAC9B,eAAe;EACf,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;AACpB;;AAEA;;;;EAIE,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,8BAA8B;EAC9B,eAAe;EACf,mBAAmB;EACnB,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,kBAAkB;EAClB,oBAAoB;EACpB,yBAAyB;EACzB,oBAAoB;EACpB,qBAAqB;EACrB,yBAAyB;AAC3B;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;;EAEE,UAAU;EACV,mBAAmB;EACnB,eAAe;EACf,iBAAiB;EACjB,gBAAgB;EAChB,yBAAyB;EACzB,kBAAkB;EAClB,4BAA4B;AAC9B;;AAEA;;;EAGE,eAAe;EACf,mBAAmB;AACrB;;AAEA;EACE,UAAU;EACV,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;EAClB,uBAAuB;AACzB;;AAEA;EACE,kCAAkC;EAClC,kBAAkB;EAClB,cAAc;EACd,kBAAkB;EAClB,UAAU;EACV,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,mBAAmB;EACnB,UAAU;EACV,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,yCAAyC;AAC3C;;AAEA;;;;EAIE,mBAAmB;EACnB,yBAAyB;EACzB,oBAAoB;EACpB,qCAAqC;AACvC;;AAEA;;;;;;;;EAQE,iCAAiC;AACnC;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,YAAY;EACZ,yBAAyB;EACzB,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;AACrB",sourcesContent:['.purchase-available,\r\n.product-inventory,\r\n.cashbox-change,\r\n.cashbox-remaining {\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n  text-align: center;\r\n  vertical-align: top;\r\n  table-layout: fixed;\r\n}\r\n\r\n.cashbox-change,\r\n.cashbox-remaining {\r\n  width: 100%;\r\n  max-width: 300px;\r\n}\r\n\r\n.product-inventory {\r\n  width: 340px;\r\n}\r\n\r\n.purchase-available {\r\n  width: 445px;\r\n}\r\n\r\n.cashbox-change col,\r\n.cashbox-remaining col {\r\n  width: 65px;\r\n}\r\n\r\n.purchase-available td,\r\n.product-inventory td,\r\n.cashbox-change td,\r\n.cashbox-remaining td {\r\n  border-color: black;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  font-family: Arial, sans-serif;\r\n  font-size: 14px;\r\n  overflow: hidden;\r\n  padding: 10px 5px;\r\n  word-break: normal;\r\n}\r\n\r\n.purchase-available th,\r\n.product-inventory th,\r\n.cashbox-change th,\r\n.cashbox-remaining th {\r\n  border-color: black;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  font-family: Arial, sans-serif;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  overflow: hidden;\r\n  padding: 10px 5px;\r\n  word-break: normal;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  padding: 2rem 1rem;\r\n  word-break: keep-all;\r\n  overflow-wrap: break-word;\r\n  font-size: 1.0625rem;\r\n  overflow-anchor: none;\r\n  background-color: #f4f3f5;\r\n}\r\n\r\nsection {\r\n  width: 28rem;\r\n}\r\n\r\nsection:last-child {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 1rem;\r\n}\r\n\r\n#app {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\ninput[type="number"],\r\ninput[type="text"] {\r\n  all: unset;\r\n  font-size: 0.825rem;\r\n  padding: 0.5rem;\r\n  background: white;\r\n  text-align: left;\r\n  border: 1px solid #afafaf;\r\n  border-radius: 6px;\r\n  width: calc(100% - 6.125rem);\r\n}\r\n\r\n#charge-button,\r\n#product-add-button,\r\n#vending-machine-charge-button {\r\n  padding: 0.5rem;\r\n  margin-left: 0.5rem;\r\n}\r\n\r\nbutton {\r\n  all: unset;\r\n  font-size: 0.825rem;\r\n  cursor: pointer;\r\n  border: 1px solid #afafaf;\r\n  border-radius: 6px;\r\n  padding: 0.3rem 0.45rem;\r\n}\r\n\r\nsection p {\r\n  border: 1px dashed rgb(70, 70, 70);\r\n  border-radius: 6px;\r\n  padding: 8px 0;\r\n  border-radius: 6px;\r\n  width: 65%;\r\n  font-size: 14px;\r\n}\r\n\r\n.purchase-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.product-inventory {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.product-container input:not(:first-child) {\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.vending-machine-wrapper {\r\n  width: 65%;\r\n}\r\n\r\n#product-add-button {\r\n  margin-left: 0.5rem;\r\n  width: 50%;\r\n  text-align: center;\r\n}\r\n\r\n#coin-return-button {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\nbutton:active {\r\n  box-shadow: 1px 1px 2px 1px #d8d8d8 inset;\r\n}\r\n\r\n.cashbox-remaining,\r\n.purchase-available,\r\n.cashbox-change,\r\n.product-inventory {\r\n  border-radius: 10px;\r\n  border-collapse: collapse;\r\n  border-style: hidden;\r\n  box-shadow: 0 0 0 1px rgb(66, 66, 66);\r\n}\r\n\r\n.purchase-available td,\r\n.product-inventory td,\r\n.cashbox-change td,\r\n.cashbox-remaining td,\r\n.purchase-available th,\r\n.product-inventory th,\r\n.cashbox-change th,\r\n.cashbox-remaining th {\r\n  border: 1px solid rgb(66, 66, 66);\r\n}\r\n\r\n.d-none {\r\n  display: none;\r\n}\r\n\r\n.table {\r\n  width: 400px;\r\n  border: 1px solid #444444;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.table-cell {\r\n  border: 1px solid #444444;\r\n  text-align: center;\r\n  padding: 10px 0;\r\n}\r\n\r\n.product-manage-form {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.vending-machine-wrapper {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n'],sourceRoot:""}]);const c=i},645:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var r="",e=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),e&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=n(t),e&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(n,r,e,a,o){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(e)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(i[s]=!0)}for(var d=0;d<n.length;d++){var u=[].concat(n[d]);e&&i[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},537:n=>{n.exports=function(n){var t=n[1],r=n[3];if(!r)return t;if("function"==typeof btoa){var e=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e),o="/*# ".concat(a," */"),i=r.sources.map((function(n){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(n," */")}));return[t].concat(i).concat([o]).join("\n")}return[t].join("\n")}},379:n=>{var t=[];function r(n){for(var r=-1,e=0;e<t.length;e++)if(t[e].identifier===n){r=e;break}return r}function e(n,e){for(var o={},i=[],c=0;c<n.length;c++){var s=n[c],d=e.base?s[0]+e.base:s[0],u=o[d]||0,p="".concat(d," ").concat(u);o[d]=u+1;var l=r(p),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==l)t[l].references++,t[l].updater(h);else{var A=a(h,e);e.byIndex=c,t.splice(c,0,{identifier:p,updater:A,references:1})}i.push(p)}return i}function a(n,t){var r=t.domAPI(t);return r.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;r.update(n=t)}else r.remove()}}n.exports=function(n,a){var o=e(n=n||[],a=a||{});return function(n){n=n||[];for(var i=0;i<o.length;i++){var c=r(o[i]);t[c].references--}for(var s=e(n,a),d=0;d<o.length;d++){var u=r(o[d]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=s}}},569:n=>{var t={};n.exports=function(n,r){var e=function(n){if(void 0===t[n]){var r=document.querySelector(n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}t[n]=r}return t[n]}(n);if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(r)}},216:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},565:(n,t,r)=>{n.exports=function(n){var t=r.nc;t&&n.setAttribute("nonce",t)}},795:n=>{n.exports=function(n){var t=n.insertStyleElement(n);return{update:function(r){!function(n,t,r){var e="";r.supports&&(e+="@supports (".concat(r.supports,") {")),r.media&&(e+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(e+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),e+=r.css,a&&(e+="}"),r.media&&(e+="}"),r.supports&&(e+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(e,n,t.options)}(t,n,r)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}},589:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},t={};function r(e){var a=t[e];if(void 0!==a)return a.exports;var o=t[e]={id:e,exports:{}};return n[e](o,o.exports,r),o.exports}r.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return r.d(t,{a:t}),t},r.d=(n,t)=>{for(var e in t)r.o(t,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},r.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),(()=>{var n=r(379),t=r.n(n),e=r(795),a=r.n(e),o=r(569),i=r.n(o),c=r(565),s=r.n(c),d=r(216),u=r.n(d),p=r(589),l=r.n(p),h=r(340),A={};A.styleTagTransform=l(),A.setAttributes=s(),A.insert=i().bind(null,"head"),A.domAPI=a(),A.insertStyleElement=u(),t()(h.Z,A),h.Z&&h.Z.locals&&h.Z.locals;const g=Object.freeze({app:"app",productManageMenuBtn:"product-add-menu",vendingMachineManageMenuBtn:"vending-machine-manage-menu",purchaseMenuBtn:"product-purchase-menu",charge_amount:"charge-amount",current_tab:"current_tab",tapComp:"tap-component",productManageComp:"product-manage-component",changesChargeComp:"changes-charge-component",productPurchaseComp:"product-purchase-component",productNameInput:"product-name-input",productPriceInput:"product-price-input",productQuantityInput:"product-quantity-input",productAddBtn:"product-add-button",vendingMachineChargeInput:"vending-machine-charge-input",vendingMachineChargeButton:"vending-machine-charge-button",vendingMachineChargeAmount:"vending-machine-charge-amount",vendingMachineCoinQuantity:n=>`vending-machine-coin-${n}-quantity`,chargeInput:"charge-input",chargeAmount:"charge-amount",chargeBtn:"charge-button",coinChanger:"coin-changer",coinReturnBtn:"coin-return-button"}),m=Object.freeze({displayNone:"d-none",table:"table",tableCell:"table-cell",productManageForm:"product-manage-form",productManageItem:"product-manage-item",productManageName:"product-manage-name",productManagePrice:"product-manage-price",productManageQuantity:"product-manage-quantity",purchaseBtn:"purchase-button",vendingMachineWrapper:"vending-machine-wrapper",cashboxRemaining:"cashbox-remaining",purchaseContainer:"purchase-container"}),b=Object.freeze({MinPrice:100,PriceStep:10,ChangeTypes:[500,100,50,10]}),C=Object.freeze({addOrUpdateProduct:"ADD_OR_UPDATE_PRODUCT",chargeChanges:"CHARGE_CHANGES",chargeAmount:"CHARGE_AMOUNT",purchaseProduct:"PURCHASE_PRODUCT",returnChanges:"RETURN_CHANGES"}),B=Object.freeze({productSoldOut:"Sold out Product.",notEnoughAmount:"Not enough amount.",notFoundProduct:"Not found product."});class v{constructor(n,t,r){this.isMounted=!1,this.$target=n,this.props=t,this.state=r,this.componentInit(),this.render(),this.isMounted=!0}componentInit(){}componentDidMount(){}componentDidUpdate(){}setState(n){this.state={...this.state,...n},this.render()}render(){this.$target.innerHTML=this.htmlTemplate(),this.isMounted?this.componentDidUpdate():this.componentDidMount()}}function f(n,t){return(null!=t?t:document).querySelector(n)}function E(n){return`#${n}`}const x={products:[],changes:{10:0,50:0,100:0,500:0},amount:0,returnedChanges:{10:0,50:0,100:0,500:0}},y="global_state_key",w=function(n,t={},r=[]){let e=t;const a=[],o=t=>{e=n(e,t),a.forEach((({subscriber:n,context:t})=>{n.call(t)}))},i={getState:()=>({...e}),subscribe:(n,t)=>{a.push({subscriber:n,context:t})},dispatch:o};let c=o;return r.reverse().forEach((n=>{c=n(i)(c)})),{...i,dispatch:c}}(((n,t)=>{switch(t.type){case C.addOrUpdateProduct:{var r;const e=null!==(r=n.products)&&void 0!==r?r:[],a=t.payload,o=e.findIndex((n=>n.name===a.name));return-1===o?e.push(a):e[o]=a,{...n,products:[...e]}}case C.chargeChanges:{var e;const r=null!==(e=n.changes)&&void 0!==e?e:[],a={};let o=t.payload;return b.ChangeTypes.forEach((n=>{var t;const e=null!==(t=r[n])&&void 0!==t?t:0,i=Math.floor(o/+n);o-=i*+n,a[n]=e+i})),{...n,changes:a}}case C.chargeAmount:{var a;const r=(null!==(a=n.amount)&&void 0!==a?a:0)+t.payload;return{...n,amount:r}}case C.purchaseProduct:{const{products:r,amount:e}=n,a=t.payload,o=r.find((n=>n.name===a));o.quantity--;const i=e-o.price;return{...n,amount:i,products:[...r]}}case C.returnChanges:{const{remainChanges:t,returnedChanges:r,amount:e}=function(n,t,r){const e={},a={};return r.sort(((n,t)=>t-n)).forEach((r=>{const o=Math.floor(t/r),i=n[r],c=Math.min(o,i);t-=c*r,a[r]=c,e[r]=i-c})),{remainChanges:e,returnedChanges:a,amount:t}}(n.changes,n.amount,b.ChangeTypes);return{...n,changes:t,returnedChanges:r,amount:e}}default:return n}}),function(){try{const n=localStorage.getItem(y);if(n)return JSON.parse(n)}catch(n){console.log(n)}return x}(),[n=>t=>r=>{t(r),function(n){try{localStorage.setItem(y,JSON.stringify(n))}catch(n){console.log(n)}}(n.getState())}]);class $ extends v{show(){this.$target.classList.remove(m.displayNone)}hide(){this.$target.classList.add(m.displayNone)}componentDidMount(){w.subscribe(this.render,this),this.$target.addEventListener("change",(()=>{const n=this.getCashInputRef();this.isNeededToStepDown(+n.value)&&n.stepDown()})),this.$target.addEventListener("click",(n=>{if(n.target.closest(E(g.vendingMachineChargeButton))){const n=+this.getCashInputRef().value;n>=b.MinPrice&&w.dispatch({type:C.chargeChanges,payload:n})}}))}getCashInputRef(){return f(E(g.vendingMachineChargeInput),this.$target)}isNeededToStepDown(n){return n%b.PriceStep!=0}htmlTemplate(){var n;const t=null!==(n=w.getState().changes)&&void 0!==n?n:[],r=b.ChangeTypes.map((n=>{var r;return`\n      <tr>\n\t\t\t\t<td>${n}원</td>\n\t\t\t\t<td id="${g.vendingMachineCoinQuantity(n)}">${null!==(r=t[n])&&void 0!==r?r:0}개</td>\n\t\t\t</tr>`})).join(""),e=b.ChangeTypes.reduce(((n,r)=>{var e;return(null!=n?n:0)+(null!==(e=t[r])&&void 0!==e?e:0)*+r}),0);return`\n\t<h3>자판기 돈통 충전하기</h3>\n\t<div class="${m.vendingMachineWrapper}">\n\t\t<input type="number" \n\t\t  name="vending-machine-charge-amount" \n\t\t  id="${g.vendingMachineChargeInput}" \n\t\t  min=${b.MinPrice} step=${b.PriceStep} autofocus \n\t\t/>\n\t\t<button id="${g.vendingMachineChargeButton}">충전하기</button>\n\t</div>\n\t<p>보유 금액: <span id="${g.vendingMachineChargeAmount}">${e}</span>원</p>\n\t<h3>동전 보유 현황</h3>\n\t<table class="${m.cashboxRemaining}">\n\t\t<colgroup>\n\t\t\t<col />\n\t\t\t<col />\n\t\t</colgroup>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>동전</th>\n\t\t\t\t<th>개수</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n      ${r}\n\t\t</tbody>\n\t</table>\n\t`}}class M extends v{show(){this.$target.classList.remove(m.displayNone)}hide(){this.$target.classList.add(m.displayNone)}isNeededToStepDown(n){return n%b.PriceStep!=0}componentDidMount(){w.subscribe(this.render,this),this.$target.addEventListener("change",(()=>{const n=f(E(g.productNameInput),this.$target);n.value=n.value.trim();const t=f(E(g.productPriceInput),this.$target);this.isNeededToStepDown(+t.value)&&t.stepDown()})),this.$target.addEventListener("submit",(n=>{n.preventDefault();const t=n.target,r=this.getProductFromForm(t);w.dispatch({type:C.addOrUpdateProduct,payload:r}),t.reset()}))}getProductFromForm(n){const t=f(E(g.productNameInput),n),r=f(E(g.productPriceInput),n),e=f(E(g.productQuantityInput),n);return{name:t.value.trim(),price:+r.value,quantity:+e.value}}htmlTemplate(){var n;const t=(null!==(n=w.getState().products)&&void 0!==n?n:[]).map((({name:n,price:t,quantity:r})=>`\n\t      <tr class="${m.productManageItem}">\n          <td class="${m.productManageName} ${m.tableCell}">${n}</td>\n          <td class="${m.productManagePrice} ${m.tableCell}">${t}</td>\n          <td class="${m.productManageQuantity} ${m.tableCell}">${r}</td>\n\t      </tr>`)).join("");return`\n\t<h2>상품 추가하기</h2>\n\t<form class="${m.productManageForm}">\n\t  <input type="text" id="${g.productNameInput}" maxlength="20" placeholder="상품명" required/>\n\t  <input type="number" id="${g.productPriceInput}" maxlength="20" placeholder="가격" min=${b.MinPrice} step=${b.PriceStep} required/>\n\t  <input type="number" id="${g.productQuantityInput}" maxlength="20" placeholder="수량" min=1 required/>\n\t  <button id="${g.productAddBtn}">추가하기</button>\n\t</form>\n\t<h2>상품 현황</h2>\n\t<table class="${m.table}">\n\t  <thead>\n\t    <tr>\n\t      <th class="${m.tableCell}">상품명</th>\n\t      <th class="${m.tableCell}">가격</th>\n\t      <th class="${m.tableCell}">수량</th>\n\t    </tr>\n\t  </thead>\n\t  <tbody>\n\t  ${t}\n\t  </tbody>\n\t</table>\n\t  `}}class P extends v{componentDidMount(){this.$target.addEventListener("click",(n=>this.onClick(n)))}onClick(n){n.target.closest(E(g.coinReturnBtn))&&w.dispatch({type:C.returnChanges})}htmlTemplate(){var n,t;const r=null!==(n=null===(t=w.getState())||void 0===t?void 0:t.returnedChanges)&&void 0!==n?n:{},e=b.ChangeTypes.map((n=>{var t;return`\n        <tr>\n          <td>${n}원</td>\n          <td id="${g.vendingMachineCoinQuantity(n)}">\n          ${null!==(t=r[n])&&void 0!==t?t:0}개\n          </td>\n        </tr>`})).join("");return`\n    <h3>잔돈</h3>\n    <button id="${g.coinReturnBtn}">반환하기</button>\n    <table class="cashbox-change">\n      <colgroup>\n        <col />\n        <col />\n      </colgroup>\n      <thead>\n        <tr>\n          <th>동전</th>\n          <th>개수</th>\n        </tr>\n      </thead>\n      <tbody>\n      ${e}\n    </table>\n    `}}class T extends v{show(){this.$target.classList.remove(m.displayNone)}hide(){this.$target.classList.add(m.displayNone)}componentDidMount(){w.subscribe(this.render,this),this.$target.addEventListener("change",(n=>this.onChange(n))),this.$target.addEventListener("click",(n=>this.onClick(n))),this.coinChangerComp=new P(f(E(g.coinChanger),this.$target))}componentDidUpdate(){this.coinChangerComp=new P(f(E(g.coinChanger),this.$target))}onClick(n){const t=n.target;if(t.closest(E(g.chargeBtn))){const n=this.getCashInputRef();w.dispatch({type:C.chargeAmount,payload:+n.value})}const r=t.closest(`.${m.purchaseBtn}`);if(r){var e;const n=null!==(e=r.dataset.id)&&void 0!==e?e:"";this.purchaseProduct(n)}}purchaseProduct(n){try{this.validatePurchase(n),w.dispatch({type:C.purchaseProduct,payload:n})}catch(n){return void alert(null==n?void 0:n.message)}}validatePurchase(n){const{amount:t,products:r}=w.getState(),e=r.find((({name:t})=>t===n));if(!e)throw Error(B.notFoundProduct);if(0===e.quantity)throw Error(B.productSoldOut);if(e.price>t)throw Error(B.notEnoughAmount)}onChange(n){const t=this.getCashInputRef();this.isNeededToStepDown(+t.value)&&t.stepDown()}getCashInputRef(){return f(E(g.chargeInput),this.$target)}isNeededToStepDown(n){return n%b.PriceStep!=0}htmlTemplate(){const{amount:n,products:t}=w.getState(),r=(null!=t?t:[]).map((({name:n,price:t,quantity:r})=>`\n\t      <tr class="${m.productManageItem}">\n          <td class="${m.productManageName} ${m.tableCell}">${n}</td>\n          <td class="${m.productManagePrice} ${m.tableCell}">${t}</td>\n          <td class="${m.productManageQuantity} ${m.tableCell}">${r}</td>\n          <td class="${m.tableCell}">\n            <button class="${m.purchaseBtn}" data-id="${n}">구매하기</button>\n          </td>\n\t      </tr>`)).join("");return`\n    <div class="${m.purchaseContainer}">\n\t<h3>충전하기</h3>\n\t<div class="${m.vendingMachineWrapper}">\n\t\t<input type="number" name="charge-amount" \n\t\t  id="${g.chargeInput}" \n\t\t  min=${b.PriceStep}\n\t\t  step=${b.PriceStep}\n\t\t/>\n\t\t<button id="${g.chargeBtn}">충전하기</button>\n\t</div>\n\t<p>충전 금액: <span id="${g.chargeAmount}">${null!=n?n:0}</span>원</p>\n    </div>\n\n    <h2>구매할 수 있는 상품 현황</h2>\n    <table class="${m.table}">\n    <thead>\n    <tr>\n      <th class="${m.tableCell}">상품명</th>\n      <th class="${m.tableCell}">가격</th>\n      <th class="${m.tableCell}">수량</th>\n      <th class="${m.tableCell}">구매</th>\n    </tr>\n    </thead>\n    <tbody>\n      ${r}\n    </tbody>\n    </table>\n    <div id="${g.coinChanger}"></div>\n    `}}class k extends v{componentDidMount(){this.$target.addEventListener("click",(n=>{const t=n.target;var r;if(t.closest(E(g.productManageMenuBtn)))null===(r=this.props)||void 0===r||r.showProductManageTab();else if(t.closest(E(g.vendingMachineManageMenuBtn))){var e;null===(e=this.props)||void 0===e||e.showChargeChangesTab()}else if(t.closest(E(g.purchaseMenuBtn))){var a;null===(a=this.props)||void 0===a||a.showPurchaseTab()}}))}htmlTemplate(){return`\n      <button id="${g.productManageMenuBtn}">상품 관리</button>\n      <button id="${g.vendingMachineManageMenuBtn}">잔돈충전</button>\n      <button id="${g.purchaseMenuBtn}">상품 구매</button>\n      `}}new class extends v{constructor(n){super(n)}componentDidMount(){this.initComponents(),this.showProductManageTab()}initComponents(){this.tapComp=new k(f(E(g.tapComp)),{showProductManageTab:()=>this.showProductManageTab(),showChargeChangesTab:()=>this.showChargeChangesTab(),showPurchaseTab:()=>this.showPurchaseTab()}),this.productManageComp=new M(f(E(g.productManageComp))),this.changesChargeComp=new $(f(E(g.changesChargeComp))),this.productPurchaseComp=new T(f(E(g.productPurchaseComp)))}hideAllTabs(){var n,t,r;null===(n=this.productManageComp)||void 0===n||n.hide(),null===(t=this.changesChargeComp)||void 0===t||t.hide(),null===(r=this.productPurchaseComp)||void 0===r||r.hide()}showProductManageTab(){var n;this.hideAllTabs(),null===(n=this.productManageComp)||void 0===n||n.show(),console.log("showProductManageTab")}showChargeChangesTab(){var n;this.hideAllTabs(),null===(n=this.changesChargeComp)||void 0===n||n.show(),console.log("showChargeCashTab")}showPurchaseTab(){var n;this.hideAllTabs(),null===(n=this.productPurchaseComp)||void 0===n||n.show(),console.log("showPurchaseTab")}htmlTemplate(){return`\n      <h1>🥤자판기🥤</h1>\n      <div id="${g.tapComp}"></div>\n      <div id="${g.productManageComp}"></div>\n      <div id="${g.changesChargeComp}"></div>\n      <div id="${g.productPurchaseComp}"></div>\n    `}}(f(E("app")))})()})();
//# sourceMappingURL=main.js.map